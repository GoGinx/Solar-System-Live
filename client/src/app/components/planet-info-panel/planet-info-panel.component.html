<div
  class="panel"
  role="dialog"
  aria-modal="true"
  [attr.aria-label]="'Données sur ' + planet.displayName"
>
  <!-- Bouton de fermeture -->
  <button
    class="close-btn"
    type="button"
    (click)="onClose()"
    aria-label="Fermer le panneau des informations planète"
  >
    ×
  </button>

  <!-- En-tête : titre + type de planète -->
  <header class="panel-header">
    <div class="panel-title-row">
      <h2>{{ planet.displayName }}</h2>

      <span class="planet-type-chip">{{ planetTypeLabel }}</span>
    </div>

    <div class="panel-subtitle" *ngIf="ephemeris">
      Éphémérides NASA JPL Horizons · {{ ephemeris.timestamp || 'maintenant' }}
    </div>
  </header>

  <!-- Corps : description + caractéristiques -->
  <section class="panel-body">
    <section class="planet-section" aria-label="Données temps réel">
      <h3>Données temps réel</h3>

      <ng-container *ngIf="ephemeris; else noData">
        <ul>
          <li>
            <span>Distance héliocentrique</span>
            <span>
              {{ heliocentricDistanceAu | number: '1.3-3' }} UA
              <ng-container *ngIf="heliocentricDistanceKm">· {{ heliocentricDistanceKm | number: '1.0-0' }} km</ng-container>
            </span>
          </li>
          <li *ngIf="rangeAu !== null">
            <span>Distance à la Terre</span>
            <span>{{ rangeAu | number: '1.3-3' }} UA · {{ rangeKm | number: '1.0-0' }} km</span>
          </li>
          <li *ngIf="lightTimeMin !== null">
            <span>Temps lumière (aller)</span>
            <span>{{ lightTimeMin | number: '1.1-1' }} min</span>
          </li>
          <li *ngIf="solarElongationDeg !== null">
            <span>Élongation Soleil-Obs-Obj</span>
            <span>{{ solarElongationDeg | number: '1.1-1' }}°</span>
          </li>
          <li *ngIf="phaseAngleDeg !== null">
            <span>Angle de phase</span>
            <span>{{ phaseAngleDeg | number: '1.1-1' }}°</span>
          </li>
          <li *ngIf="illuminationFraction !== null">
            <span>Fraction éclairée</span>
            <span>{{ illuminationFraction | percent: '1.0-1' }}</span>
          </li>
          <li *ngIf="apparentMagnitude !== null">
            <span>Magnitude apparente</span>
            <span>{{ apparentMagnitude | number: '1.1-2' }}</span>
          </li>
          <li *ngIf="speedAuPerDay !== null">
            <span>Vitesse</span>
            <span>{{ speedAuPerDay | number: '1.3-3' }} UA/j · {{ speedKmPerS | number: '1.2-2' }} km/s</span>
          </li>
          <li>
            <span>Coordonnées (UA)</span>
            <span>
              x={{ ephemeris.x_au | number: '1.3-3' }},
              y={{ ephemeris.y_au | number: '1.3-3' }},
              z={{ ephemeris.z_au | number: '1.3-3' }}
            </span>
          </li>
        </ul>
      </ng-container>

      <ng-template #noData>
        <p class="planet-summary">
          Aucune donnée temps réel disponible pour l’instant.
        </p>
      </ng-template>
    </section>
  </section>

  <!-- Pied de carte : note / source -->
  <footer class="panel-footer">
    <p>
      Affichage 100% éphémérides temps réel (NASA JPL Horizons). Aucune donnée statique locale.
    </p>
  </footer>
</div>
