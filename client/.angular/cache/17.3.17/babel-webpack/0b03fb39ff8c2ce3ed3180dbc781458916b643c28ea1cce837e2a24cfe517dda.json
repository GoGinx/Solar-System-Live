{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/time-scrubber.service\";\nimport * as i2 from \"../../services/i18n.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../pipes/translate.pipe\";\nfunction TimeScrubberComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const m_r1 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(m_r1);\n  }\n}\nexport let TimeScrubberComponent = /*#__PURE__*/(() => {\n  class TimeScrubberComponent {\n    constructor(time, i18n, cdr) {\n      this.time = time;\n      this.i18n = i18n;\n      this.cdr = cdr;\n    }\n    ngOnInit() {\n      this.langSub = this.i18n.lang$.subscribe(() => {\n        this.cdr.markForCheck();\n      });\n    }\n    ngOnDestroy() {\n      this.langSub?.unsubscribe();\n      this.langSub = undefined;\n    }\n    onInput(raw) {\n      const v = Number.parseFloat(raw);\n      if (!Number.isFinite(v)) return;\n      this.time.setOffsetDays(v);\n    }\n    get monthLabels() {\n      const raw = this.i18n.t('months.short');\n      const parsed = raw.split(',').map(v => v.trim()).filter(Boolean);\n      if (parsed.length === 12) return parsed;\n      return ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'];\n    }\n    formatYears(value) {\n      const fixed = value.toFixed(2);\n      return fixed.replace(/\\.00$/, '').replace(/(\\.\\d)0$/, '$1');\n    }\n    get label() {\n      const days = this.time.offsetDays;\n      if (days === 0) return this.i18n.t('label.now');\n      const years = Math.abs(days) / 365.25;\n      const sign = days < 0 ? '-' : '+';\n      const unit = this.i18n.t('unit.yearShort');\n      return `T${sign}${this.formatYears(years)}${unit}`;\n    }\n    static {\n      this.ɵfac = function TimeScrubberComponent_Factory(t) {\n        return new (t || TimeScrubberComponent)(i0.ɵɵdirectiveInject(i1.TimeScrubberService), i0.ɵɵdirectiveInject(i2.I18nService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TimeScrubberComponent,\n        selectors: [[\"app-time-scrubber\"]],\n        decls: 19,\n        vars: 18,\n        consts: [[1, \"scrub\"], [1, \"meta\"], [1, \"cap\"], [1, \"val\"], [\"type\", \"range\", \"min\", \"-365\", \"max\", \"0\", \"step\", \"1\", 1, \"slider\", 3, \"input\", \"value\"], [1, \"months\"], [4, \"ngFor\", \"ngForOf\"], [1, \"ticks\"]],\n        template: function TimeScrubberComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵpipe(1, \"t\");\n            i0.ɵɵelementStart(2, \"div\", 1)(3, \"span\", 2);\n            i0.ɵɵtext(4);\n            i0.ɵɵpipe(5, \"t\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"span\", 3);\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"input\", 4);\n            i0.ɵɵpipe(9, \"t\");\n            i0.ɵɵlistener(\"input\", function TimeScrubberComponent_Template_input_input_8_listener($event) {\n              return ctx.onInput($event.target.value);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 5);\n            i0.ɵɵtemplate(11, TimeScrubberComponent_span_11_Template, 2, 1, \"span\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"div\", 7)(13, \"span\");\n            i0.ɵɵtext(14);\n            i0.ɵɵpipe(15, \"t\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"span\");\n            i0.ɵɵtext(17);\n            i0.ɵɵpipe(18, \"t\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 8, \"aria.timeScrubber\"));\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 10, \"label.timeRange\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.label);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"value\", ctx.time.offsetDays);\n            i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(9, 12, \"aria.timeOffset\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.monthLabels);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(15, 14, \"tick.start\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 16, \"tick.now\"));\n          }\n        },\n        dependencies: [i3.NgForOf, i4.TranslatePipe],\n        styles: [\"[_nghost-%COMP%]{position:absolute;left:18px;bottom:86px;z-index:55;pointer-events:none}.scrub[_ngcontent-%COMP%]{pointer-events:auto;width:220px;padding:10px 10px 8px;border-radius:14px;background:#060a1a6b;border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);box-shadow:0 18px 60px #000000a6}.meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px}.cap[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.14em;font-size:11px;color:#eef2ffad}.val[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.08em;font-size:11px;color:#00fff0e6;text-transform:uppercase}.slider[_ngcontent-%COMP%]{width:100%;height:18px;background:transparent;margin:0;appearance:none}.slider[_ngcontent-%COMP%]:focus{outline:none}.slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{height:4px;border-radius:999px;background:linear-gradient(90deg,#00fff02e,#5865f22e);box-shadow:0 0 0 1px #ffffff0f inset}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:12px;height:12px;margin-top:-4px;border-radius:999px;background:#00fff0f2;box-shadow:0 0 12px #00fff059;border:1px solid rgba(255,255,255,.28)}.slider[_ngcontent-%COMP%]::-moz-range-track{height:4px;border-radius:999px;background:linear-gradient(90deg,#00fff02e,#5865f22e)}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;border-radius:999px;background:#00fff0f2;border:1px solid rgba(255,255,255,.28)}.ticks[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:4px;font-size:10px;color:#eef2ff80;letter-spacing:.04em}.months[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,1fr);gap:2px;margin-top:6px;font-size:9px;color:#eef2ff8c;letter-spacing:.04em;text-transform:uppercase}.months[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}\"],\n        changeDetection: 0\n      });\n    }\n  }\n  return TimeScrubberComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}