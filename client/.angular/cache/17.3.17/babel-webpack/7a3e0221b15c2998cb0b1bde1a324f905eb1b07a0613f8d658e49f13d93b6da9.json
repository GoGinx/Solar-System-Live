{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/time-scrubber.service\";\nimport * as i2 from \"../../services/i18n.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../pipes/translate.pipe\";\nfunction TimeScrubberComponent_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const m_r1 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(m_r1);\n  }\n}\nexport let TimeScrubberComponent = /*#__PURE__*/(() => {\n  class TimeScrubberComponent {\n    constructor(time, i18n, cdr) {\n      this.time = time;\n      this.i18n = i18n;\n      this.cdr = cdr;\n    }\n    ngOnInit() {\n      this.langSub = this.i18n.lang$.subscribe(() => {\n        this.cdr.markForCheck();\n      });\n    }\n    ngOnDestroy() {\n      this.langSub?.unsubscribe();\n      this.langSub = undefined;\n    }\n    onInput(raw) {\n      const v = Number.parseFloat(raw);\n      if (!Number.isFinite(v)) return;\n      this.time.setOffsetDays(v);\n    }\n    get monthLabels() {\n      const months = this.getMonthShortLabels();\n      const current = new Date().getMonth();\n      const ordered = [];\n      for (let offset = 11; offset >= 0; offset -= 1) {\n        const idx = (current - offset + 1200) % 12;\n        ordered.push(months[idx]);\n      }\n      return ordered;\n    }\n    getMonthShortLabels() {\n      const raw = this.i18n.t('months.short');\n      const parsed = raw.split(',').map(v => v.trim()).filter(Boolean);\n      if (parsed.length === 12) return parsed;\n      return ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'];\n    }\n    formatYears(value) {\n      const fixed = value.toFixed(2);\n      return fixed.replace(/\\.00$/, '').replace(/(\\.\\d)0$/, '$1');\n    }\n    get label() {\n      const days = this.time.offsetDays;\n      if (days === 0) return this.i18n.t('label.now');\n      const years = Math.abs(days) / 365.25;\n      const sign = days < 0 ? '-' : '+';\n      const unit = this.i18n.t('unit.yearShort');\n      return `T${sign}${this.formatYears(years)}${unit}`;\n    }\n    get selectedDateLabel() {\n      const days = this.time.offsetDays;\n      const base = new Date();\n      const target = new Date(base.getFullYear(), base.getMonth(), base.getDate());\n      target.setDate(target.getDate() + Math.round(days));\n      const lang = this.i18n.language === 'fr' ? 'fr-FR' : 'en-US';\n      return new Intl.DateTimeFormat(lang, {\n        day: 'numeric',\n        month: 'long',\n        year: 'numeric'\n      }).format(target);\n    }\n    static {\n      this.ɵfac = function TimeScrubberComponent_Factory(t) {\n        return new (t || TimeScrubberComponent)(i0.ɵɵdirectiveInject(i1.TimeScrubberService), i0.ɵɵdirectiveInject(i2.I18nService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TimeScrubberComponent,\n        selectors: [[\"app-time-scrubber\"]],\n        decls: 23,\n        vars: 19,\n        consts: [[1, \"scrub\"], [1, \"meta\"], [1, \"cap\"], [1, \"val\"], [1, \"date-line\"], [1, \"slider-wrap\"], [\"type\", \"range\", \"min\", \"-365\", \"max\", \"0\", \"step\", \"1\", 1, \"slider\", 3, \"input\", \"value\"], [\"aria-hidden\", \"true\", 1, \"today-marker\"], [1, \"months\"], [4, \"ngFor\", \"ngForOf\"], [1, \"ticks\"]],\n        template: function TimeScrubberComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵpipe(1, \"t\");\n            i0.ɵɵelementStart(2, \"div\", 1)(3, \"span\", 2);\n            i0.ɵɵtext(4);\n            i0.ɵɵpipe(5, \"t\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"span\", 3);\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 4);\n            i0.ɵɵtext(9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 5)(11, \"input\", 6);\n            i0.ɵɵpipe(12, \"t\");\n            i0.ɵɵlistener(\"input\", function TimeScrubberComponent_Template_input_input_11_listener($event) {\n              return ctx.onInput($event.target.value);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(13, \"span\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"div\", 8);\n            i0.ɵɵtemplate(15, TimeScrubberComponent_span_15_Template, 2, 1, \"span\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"div\", 10)(17, \"span\");\n            i0.ɵɵtext(18);\n            i0.ɵɵpipe(19, \"t\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"span\");\n            i0.ɵɵtext(21);\n            i0.ɵɵpipe(22, \"t\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 9, \"aria.timeScrubber\"));\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 11, \"label.timeRange\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.label);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.selectedDateLabel);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"value\", ctx.time.offsetDays);\n            i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(12, 13, \"aria.timeOffset\"));\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngForOf\", ctx.monthLabels);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 15, \"tick.start\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(22, 17, \"tick.now\"));\n          }\n        },\n        dependencies: [i3.NgForOf, i4.TranslatePipe],\n        styles: [\"[_nghost-%COMP%]{position:absolute;left:18px;bottom:86px;z-index:55;pointer-events:none}.scrub[_ngcontent-%COMP%]{pointer-events:auto;width:220px;padding:10px 10px 8px;border-radius:14px;background:#060a1a6b;border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);box-shadow:0 18px 60px #000000a6}.meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:6px}.cap[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.14em;font-size:11px;color:#eef2ffad}.val[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.08em;font-size:11px;color:#00fff0e6;text-transform:uppercase}.date-line[_ngcontent-%COMP%]{font-size:11px;font-weight:800;letter-spacing:.06em;color:#eef2ffc2;text-transform:uppercase;margin-bottom:8px}.slider-wrap[_ngcontent-%COMP%]{position:relative}.today-marker[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;width:2px;height:14px;transform:translate(50%,-50%);border-radius:2px;background:#ffffffd9;box-shadow:0 0 10px #ffffff8c;pointer-events:none}.slider[_ngcontent-%COMP%]{width:100%;height:18px;background:transparent;margin:0;appearance:none}.slider[_ngcontent-%COMP%]:focus{outline:none}.slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{height:4px;border-radius:999px;background:linear-gradient(90deg,#00fff02e,#5865f22e);box-shadow:0 0 0 1px #ffffff0f inset}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:12px;height:12px;margin-top:-4px;border-radius:999px;background:#00fff0f2;box-shadow:0 0 12px #00fff059;border:1px solid rgba(255,255,255,.28)}.slider[_ngcontent-%COMP%]::-moz-range-track{height:4px;border-radius:999px;background:linear-gradient(90deg,#00fff02e,#5865f22e)}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;border-radius:999px;background:#00fff0f2;border:1px solid rgba(255,255,255,.28)}.ticks[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:4px;font-size:10px;color:#eef2ff80;letter-spacing:.04em}.months[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,1fr);gap:2px;margin-top:8px;font-size:9px;color:#eef2ffa6;letter-spacing:.04em;text-transform:uppercase}.months[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;text-align:center;padding-top:10px}.months[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:50%;width:1px;height:8px;transform:translate(-50%);background:#00fff073}.months[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3n):before{height:12px;background:#00fff0b3}.months[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6n):before{height:14px;background:#00fff0e6}\"],\n        changeDetection: 0\n      });\n    }\n  }\n  return TimeScrubberComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}